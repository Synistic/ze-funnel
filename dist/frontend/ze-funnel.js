var ZeFunnel=function(){"use strict";var e=Object.defineProperty,t=(t,n,l)=>((t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l)(t,"symbol"!=typeof n?n+"":n,l);function n(){}function l(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(l)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let u,a;function c(e,t){return e===t||(u||(u=document.createElement("a")),u.href=t,e===u.href)}function d(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function g(){return v(" ")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e){return""===e?null:+e}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t){e.value=null==t?"":t}function k(e,t,n,l){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function z(e,t,n){for(let l=0;l<e.options.length;l+=1){const n=e.options[l];if(n.__value===t)return void(n.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function q(e,t,n){e.classList.toggle(t,!!n)}function _(e){a=e}function E(){if(!a)throw new Error("Function called outside component initialization");return a}function I(){const e=E();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const i=function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}(t,n,{cancelable:l});return r.slice().forEach(t=>{t.call(e,i)}),!i.defaultPrevented}return!0}}const A=[],L=[];let D=[];const F=[],N=Promise.resolve();let j=!1;function M(e){D.push(e)}const T=new Set;let S=0;function C(){if(0!==S)return;const e=a;do{try{for(;S<A.length;){const e=A[S];S++,_(e),P(e.$$)}}catch(t){throw A.length=0,S=0,t}for(_(null),A.length=0,S=0;L.length;)L.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];T.has(t)||(T.add(t),t())}D.length=0}while(A.length);for(;F.length;)F.pop()();j=!1,T.clear(),_(e)}function P(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const Q=new Set;let B;function O(){B={r:0,c:[],p:B}}function G(){B.r||i(B.c),B=B.p}function V(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function W(e,t,n,l){if(e&&e.o){if(Q.has(e))return;Q.add(e),B.c.push(()=>{Q.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function R(e){return void 0!==(null==e?void 0:e.length)?e:Array.from(e)}function Z(e){e&&e.c()}function U(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),M(()=>{const t=e.$$.on_mount.map(l).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]}),s.forEach(M)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];D.forEach(l=>-1===e.indexOf(l)?t.push(l):n.push(l)),n.forEach(e=>e()),D=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(A.push(e),j||(j=!0,N.then(C)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(e,t,l,o,s,u,c=null,d=[-1]){const f=a;_(e);const m=e.$$={fragment:null,ctx:[],props:u,update:n,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:r(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};c&&c(m.root);let h=!1;if(m.ctx=l?l(e,t.props||{},(t,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&s(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&J(e,t)),n}):[],m.update(),h=!0,i(m.before_update),m.fragment=!!o&&o(m.ctx),t.target){if(t.hydrate){const e=(v=t.target,Array.from(v.childNodes));m.fragment&&m.fragment.l(e),e.forEach(p)}else m.fragment&&m.fragment.c();t.intro&&V(e.$$.fragment),U(e,t.target,t.anchor),C()}var v;_(f)}class X{constructor(){t(this,"$$"),t(this,"$$set")}$destroy(){Y(this,1),this.$destroy=n}$on(e,t){if(!o(t))return n;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const e=l.indexOf(t);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const K=[];function ee(e,t=n){let l;const r=new Set;function i(t){if(s(e,t)&&(e=t,l)){const t=!K.length;for(const n of r)n[1](),K.push(n,e);if(t){for(let e=0;e<K.length;e+=2)K[e][0](K[e+1]);K.length=0}}}function o(t){i(t(e))}return{set:i,update:o,subscribe:function(s,u=n){const a=[s,u];return r.add(a),1===r.size&&(l=t(i,o)||n),s(e),()=>{r.delete(a),0===r.size&&l&&(l(),l=null)}}}}const te=function(){const{subscribe:e,set:t,update:n}=ee({funnelData:null,answers:new Map,currentQuestionIndex:0,isInitialized:!1});return{subscribe:e,initialize(e){t({funnelData:e,answers:new Map,currentQuestionIndex:0,isInitialized:!0})},setAnswer(e,t){n(n=>{const l=new Map(n.answers);return l.set(e,t),{...n,answers:l}})},getAnswer(e){let t=null;return this.subscribe(n=>{t=n.answers.get(e)})(),t},getAllAnswers(){let e={};return this.subscribe(t=>{t.answers.forEach((t,n)=>{e[n]=t})})(),e},isCurrentQuestionAnswered(e){let t=!1;return this.subscribe(n=>{if(!n.funnelData)return!1;const l=n.funnelData.questions[e];if(!l)return!1;const r=n.answers.get(l.id);if(null!=r){switch(l.type){case"text_input":t="string"==typeof r&&r.trim().length>0;break;case"image_selection":case"icon_selection":case"text_selection":t=l.options&&l.options.multiple?Array.isArray(r)&&r.length>0:null!=r;break;case"multi_input":t="object"==typeof r&&null!==r&&Object.keys(r).length>0;break;default:t=null!=r}l.required&&!t&&(t=!1)}else t=!1})(),t},validateAnswer(e,t){let n={isValid:!0,errors:[]};return this.subscribe(l=>{if(!l.funnelData)return;const r=l.funnelData.questions.find(t=>t.id===e);if(r){if(r.required){if(null==t||"string"==typeof t&&0===t.trim().length||Array.isArray(t)&&0===t.length)return n.isValid=!1,void n.errors.push("This field is required")}r.validation&&(n=this.applyValidationRules(t,r.validation,n))}})(),n},applyValidationRules(e,t,n){if(t.minLength&&"string"==typeof e&&e.length<t.minLength&&(n.isValid=!1,n.errors.push(`Minimum ${t.minLength} characters required`)),t.maxLength&&"string"==typeof e&&e.length>t.maxLength&&(n.isValid=!1,n.errors.push(`Maximum ${t.maxLength} characters allowed`)),t.pattern&&"string"==typeof e){new RegExp(t.pattern).test(e)||(n.isValid=!1,n.errors.push(t.patternMessage||"Invalid format"))}if(t.min&&"number"==typeof e&&e<t.min&&(n.isValid=!1,n.errors.push(`Minimum value is ${t.min}`)),t.max&&"number"==typeof e&&e>t.max&&(n.isValid=!1,n.errors.push(`Maximum value is ${t.max}`)),t.email&&"string"==typeof e){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(n.isValid=!1,n.errors.push("Please enter a valid email address"))}return n},clearAnswers(){n(e=>({...e,answers:new Map}))},reset(){t({funnelData:null,answers:new Map,currentQuestionIndex:0,isInitialized:!1})}}}();const ne=function(){const{subscribe:e,set:t,update:n}=ee({tracking:null,startTime:null,events:[],isEnabled:!0});return{subscribe:e,initialize(e){t({tracking:e,startTime:Date.now(),events:[],isEnabled:(null==e?void 0:e.analyticsEnabled)??!0})},trackEvent(e,t={}){n(n=>{var l;if(!n.isEnabled)return n;const r={type:e,data:t,timestamp:Date.now(),sessionId:null==(l=n.tracking)?void 0:l.sessionId};return this.sendEvent(r),{...n,events:[...n.events,r]}})},async sendEvent(e){try{"undefined"!=typeof zeFunnelWP&&zeFunnelWP.restUrl&&await fetch(`${zeFunnelWP.restUrl}analytics`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":zeFunnelWP.nonce},body:JSON.stringify(e)})}catch(t){console.warn("Analytics tracking failed:",t)}},getCompletionTime(){let e=0;return this.subscribe(t=>{t.startTime&&(e=Math.round((Date.now()-t.startTime)/1e3))})(),e},getEvents(){let e=[];return this.subscribe(t=>{e=[...t.events]})(),e},getEventsByType(e){let t=[];return this.subscribe(n=>{t=n.events.filter(t=>t.type===e)})(),t},trackQuestionTiming(e,t){this.trackEvent("question_timing",{questionId:e,timeSpent:t})},trackInteraction(e,t={}){this.trackEvent("user_interaction",{interaction:e,...t})},setEnabled(e){n(t=>({...t,isEnabled:e}))},clearEvents(){n(e=>({...e,events:[]}))},reset(){t({tracking:null,startTime:null,events:[],isEnabled:!0})}}}();function le(e){let t,l,r,i,o,s,u,a;return{c(){t=h("div"),l=h("div"),r=g(),i=h("div"),o=v("Frage "),s=v(e[1]),u=v(" von "),a=v(e[2]),b(l,"class","ze-progress-fill svelte-1glhfvc"),k(l,"width",e[0]+"%"),b(t,"class","ze-progress-bar svelte-1glhfvc"),b(i,"class","ze-progress-text svelte-1glhfvc")},m(e,n){f(e,t,n),d(t,l),f(e,r,n),f(e,i,n),d(i,o),d(i,s),d(i,u),d(i,a)},p(e,[t]){1&t&&k(l,"width",e[0]+"%"),2&t&&y(s,e[1]),4&t&&y(a,e[2])},i:n,o:n,d(e){e&&(p(t),p(r),p(i))}}}function re(e,t,n){let{progress:l=0}=t,{current:r=1}=t,{total:i=1}=t;return e.$$set=e=>{"progress"in e&&n(0,l=e.progress),"current"in e&&n(1,r=e.current),"total"in e&&n(2,i=e.total)},[l,r,i]}class ie extends X{constructor(e){super(),H(this,e,re,le,s,{progress:0,current:1,total:2})}}function oe(e,t,n){const l=e.slice();return l[7]=t[n],l}function se(e){let t,n,l,r;return{c(){t=h("input"),b(t,"type","text"),b(t,"class","ze-text-input svelte-1a467z1"),b(t,"placeholder",n=e[0].placeholder||"Ihre Antwort..."),q(t,"error",e[2].length>0)},m(n,i){f(n,t,i),x(t,e[1]),l||(r=[$(t,"input",e[5]),$(t,"input",e[3]),$(t,"blur",e[3])],l=!0)},p(e,l){1&l&&n!==(n=e[0].placeholder||"Ihre Antwort...")&&b(t,"placeholder",n),2&l&&t.value!==e[1]&&x(t,e[1]),4&l&&q(t,"error",e[2].length>0)},d(e){e&&p(t),l=!1,i(r)}}}function ue(e){let t,n,l,r;return{c(){t=h("input"),b(t,"type","email"),b(t,"class","ze-text-input svelte-1a467z1"),b(t,"placeholder",n=e[0].placeholder||"Ihre Antwort..."),q(t,"error",e[2].length>0)},m(n,i){f(n,t,i),x(t,e[1]),l||(r=[$(t,"input",e[4]),$(t,"input",e[3]),$(t,"blur",e[3])],l=!0)},p(e,l){1&l&&n!==(n=e[0].placeholder||"Ihre Antwort...")&&b(t,"placeholder",n),2&l&&t.value!==e[1]&&x(t,e[1]),4&l&&q(t,"error",e[2].length>0)},d(e){e&&p(t),l=!1,i(r)}}}function ae(e){let t,n=R(e[2]),l=[];for(let r=0;r<n.length;r+=1)l[r]=ce(oe(e,n,r));return{c(){t=h("div");for(let e=0;e<l.length;e+=1)l[e].c();b(t,"class","ze-field-errors svelte-1a467z1")},m(e,n){f(e,t,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null)},p(e,r){if(4&r){let i;for(n=R(e[2]),i=0;i<n.length;i+=1){const o=oe(e,n,i);l[i]?l[i].p(o,r):(l[i]=ce(o),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&p(t),m(l,e)}}}function ce(e){let t,n,l=e[7]+"";return{c(){t=h("div"),n=v(l),b(t,"class","ze-field-error svelte-1a467z1")},m(e,l){f(e,t,l),d(t,n)},p(e,t){4&t&&l!==(l=e[7]+"")&&y(n,l)},d(e){e&&p(t)}}}function de(e){let t,l;function r(e,t){var n;return(null==(n=e[0].validation)?void 0:n.email)?ue:se}let i=r(e),o=i(e),s=e[2].length>0&&ae(e);return{c(){t=h("div"),o.c(),l=g(),s&&s.c(),b(t,"class","ze-input-group svelte-1a467z1")},m(e,n){f(e,t,n),o.m(t,null),d(t,l),s&&s.m(t,null)},p(e,[n]){i===(i=r(e))&&o?o.p(e,n):(o.d(1),o=i(e),o&&(o.c(),o.m(t,l))),e[2].length>0?s?s.p(e,n):(s=ae(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i:n,o:n,d(e){e&&p(t),o.d(),s&&s.d()}}}function fe(e,t,n){let{question:l}=t;const r=I();let i="",o=[];return e.$$set=e=>{"question"in e&&n(0,l=e.question)},[l,i,o,function(){n(2,o=[]),l.required&&!i.trim()&&o.push("Dieses Feld ist erforderlich"),l.validation&&(l.validation.minLength&&i.length<l.validation.minLength&&o.push(`Mindestens ${l.validation.minLength} Zeichen erforderlich`),l.validation.email&&i&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)&&o.push("Bitte geben Sie eine gültige E-Mail-Adresse ein")),r("answer",{answer:i.trim()})},function(){i=this.value,n(1,i)},function(){i=this.value,n(1,i)}]}class pe extends X{constructor(e){super(),H(this,e,fe,de,s,{question:0})}}function me(e,t,n){const l=e.slice();return l[6]=t[n],l}function he(e){let t;return{c(){t=h("div"),t.textContent="📷",b(t,"class","ze-option-placeholder svelte-1s1ad3j")},m(e,n){f(e,t,n)},p:n,d(e){e&&p(t)}}}function ve(e){let t,n,l;return{c(){t=h("img"),c(t.src,n=e[6].image)||b(t,"src",n),b(t,"alt",l=e[6].label||e[6].text||e[6].value),b(t,"class","ze-option-image svelte-1s1ad3j"),b(t,"loading","lazy")},m(e,n){f(e,t,n)},p(e,r){1&r&&!c(t.src,n=e[6].image)&&b(t,"src",n),1&r&&l!==(l=e[6].label||e[6].text||e[6].value)&&b(t,"alt",l)},d(e){e&&p(t)}}}function ge(e){let t,n,l=e[2](e[6].value),r=l&&$e();return{c(){t=h("div"),n=h("div"),r&&r.c(),b(n,"class","ze-checkbox svelte-1s1ad3j"),q(n,"checked",e[2](e[6].value)),b(t,"class","ze-option-checkbox svelte-1s1ad3j")},m(e,l){f(e,t,l),d(t,n),r&&r.m(n,null)},p(e,t){1&t&&(l=e[2](e[6].value)),l?r||(r=$e(),r.c(),r.m(n,null)):r&&(r.d(1),r=null),5&t&&q(n,"checked",e[2](e[6].value))},d(e){e&&p(t),r&&r.d()}}}function $e(e){let t;return{c(){t=v("✓")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function be(e){var t;let n,l,r,i,o,s,u,a,c=(e[6].label||e[6].text||e[6].value)+"";function m(e,t){return e[6].image?ve:he}let w=m(e),x=w(e),k=(null==(t=e[0].options)?void 0:t.multiple)&&ge(e);function z(){return e[3](e[6])}return{c(){n=h("button"),x.c(),l=g(),r=h("div"),i=v(c),o=g(),k&&k.c(),s=g(),b(r,"class","ze-option-text svelte-1s1ad3j"),b(n,"type","button"),b(n,"class","ze-option svelte-1s1ad3j"),q(n,"selected",e[2](e[6].value))},m(e,t){f(e,n,t),x.m(n,null),d(n,l),d(n,r),d(r,i),d(n,o),k&&k.m(n,null),d(n,s),u||(a=$(n,"click",z),u=!0)},p(t,r){var o;w===(w=m(e=t))&&x?x.p(e,r):(x.d(1),x=w(e),x&&(x.c(),x.m(n,l))),1&r&&c!==(c=(e[6].label||e[6].text||e[6].value)+"")&&y(i,c),(null==(o=e[0].options)?void 0:o.multiple)?k?k.p(e,r):(k=ge(e),k.c(),k.m(n,s)):k&&(k.d(1),k=null),5&r&&q(n,"selected",e[2](e[6].value))},d(e){e&&p(n),x.d(),k&&k.d(),u=!1,a()}}}function we(e){var t;let l,r=R((null==(t=e[0].options)?void 0:t.choices)||[]),i=[];for(let n=0;n<r.length;n+=1)i[n]=be(me(e,r,n));return{c(){l=h("div");for(let e=0;e<i.length;e+=1)i[e].c();b(l,"class","ze-options-grid svelte-1s1ad3j")},m(e,t){f(e,l,t);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(l,null)},p(e,[t]){var n;if(7&t){let o;for(r=R((null==(n=e[0].options)?void 0:n.choices)||[]),o=0;o<r.length;o+=1){const n=me(e,r,o);i[o]?i[o].p(n,t):(i[o]=be(n),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:n,o:n,d(e){e&&p(l),m(i,e)}}}function ye(e,t,n){var l;let{question:r}=t;const i=I();let o=(null==(l=r.options)?void 0:l.multiple)?[]:null;function s(e){var t;(null==(t=r.options)?void 0:t.multiple)?(o=o.includes(e)?o.filter(t=>t!==e):[...o,e],i("answer",{answer:o})):(o=e,i("answer",{answer:e}))}return e.$$set=e=>{"question"in e&&n(0,r=e.question)},[r,s,function(e){var t;return(null==(t=r.options)?void 0:t.multiple)?o.includes(e):o===e},e=>s(e.value)]}class xe extends X{constructor(e){super(),H(this,e,ye,we,s,{question:0})}}function ke(e,t,n){const l=e.slice();return l[6]=t[n],l}function ze(e){let t,n,l=e[2](e[6].value),r=l&&qe();return{c(){t=h("div"),n=h("div"),r&&r.c(),b(n,"class","ze-checkbox svelte-14rvwkw"),q(n,"checked",e[2](e[6].value)),b(t,"class","ze-option-checkbox svelte-14rvwkw")},m(e,l){f(e,t,l),d(t,n),r&&r.m(n,null)},p(e,t){1&t&&(l=e[2](e[6].value)),l?r||(r=qe(),r.c(),r.m(n,null)):r&&(r.d(1),r=null),5&t&&q(n,"checked",e[2](e[6].value))},d(e){e&&p(t),r&&r.d()}}}function qe(e){let t;return{c(){t=v("✓")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function _e(e){var t;let n,l,r,i,o,s,u,a,c,m,w=(e[6].icon||"❓")+"",x=(e[6].label||e[6].text||e[6].value)+"",k=(null==(t=e[0].options)?void 0:t.multiple)&&ze(e);function z(){return e[3](e[6])}return{c(){n=h("button"),l=h("div"),r=v(w),i=g(),o=h("div"),s=v(x),u=g(),k&&k.c(),a=g(),b(l,"class","ze-option-icon svelte-14rvwkw"),b(o,"class","ze-option-text svelte-14rvwkw"),b(n,"type","button"),b(n,"class","ze-option svelte-14rvwkw"),q(n,"selected",e[2](e[6].value))},m(e,t){f(e,n,t),d(n,l),d(l,r),d(n,i),d(n,o),d(o,s),d(n,u),k&&k.m(n,null),d(n,a),c||(m=$(n,"click",z),c=!0)},p(t,l){var i;e=t,1&l&&w!==(w=(e[6].icon||"❓")+"")&&y(r,w),1&l&&x!==(x=(e[6].label||e[6].text||e[6].value)+"")&&y(s,x),(null==(i=e[0].options)?void 0:i.multiple)?k?k.p(e,l):(k=ze(e),k.c(),k.m(n,a)):k&&(k.d(1),k=null),5&l&&q(n,"selected",e[2](e[6].value))},d(e){e&&p(n),k&&k.d(),c=!1,m()}}}function Ee(e){var t;let l,r=R((null==(t=e[0].options)?void 0:t.choices)||[]),i=[];for(let n=0;n<r.length;n+=1)i[n]=_e(ke(e,r,n));return{c(){l=h("div");for(let e=0;e<i.length;e+=1)i[e].c();b(l,"class","ze-options-grid svelte-14rvwkw")},m(e,t){f(e,l,t);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(l,null)},p(e,[t]){var n;if(7&t){let o;for(r=R((null==(n=e[0].options)?void 0:n.choices)||[]),o=0;o<r.length;o+=1){const n=ke(e,r,o);i[o]?i[o].p(n,t):(i[o]=_e(n),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:n,o:n,d(e){e&&p(l),m(i,e)}}}function Ie(e,t,n){var l;let{question:r}=t;const i=I();let o=(null==(l=r.options)?void 0:l.multiple)?[]:null;function s(e){var t;(null==(t=r.options)?void 0:t.multiple)?(o=o.includes(e)?o.filter(t=>t!==e):[...o,e],i("answer",{answer:o})):(o=e,i("answer",{answer:e}))}return e.$$set=e=>{"question"in e&&n(0,r=e.question)},[r,s,function(e){var t;return(null==(t=r.options)?void 0:t.multiple)?o.includes(e):o===e},e=>s(e.value)]}class Ae extends X{constructor(e){super(),H(this,e,Ie,Ee,s,{question:0})}}function Le(e,t,n){const l=e.slice();return l[6]=t[n],l}function De(e){let t,n,l=e[2](e[6].value),r=l&&Fe();return{c(){t=h("div"),n=h("div"),r&&r.c(),b(n,"class","ze-checkbox svelte-2z8vjh"),q(n,"checked",e[2](e[6].value)),b(t,"class","ze-option-checkbox svelte-2z8vjh")},m(e,l){f(e,t,l),d(t,n),r&&r.m(n,null)},p(e,t){1&t&&(l=e[2](e[6].value)),l?r||(r=Fe(),r.c(),r.m(n,null)):r&&(r.d(1),r=null),5&t&&q(n,"checked",e[2](e[6].value))},d(e){e&&p(t),r&&r.d()}}}function Fe(e){let t;return{c(){t=v("✓")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function Ne(e){var t;let n,l,r,i,o,s,u,a=(e[6].label||e[6].text||e[6].value)+"",c=(null==(t=e[0].options)?void 0:t.multiple)&&De(e);function m(){return e[3](e[6])}return{c(){n=h("button"),l=h("div"),r=v(a),i=g(),c&&c.c(),o=g(),b(l,"class","ze-option-text svelte-2z8vjh"),b(n,"type","button"),b(n,"class","ze-option svelte-2z8vjh"),q(n,"selected",e[2](e[6].value))},m(e,t){f(e,n,t),d(n,l),d(l,r),d(n,i),c&&c.m(n,null),d(n,o),s||(u=$(n,"click",m),s=!0)},p(t,l){var i;e=t,1&l&&a!==(a=(e[6].label||e[6].text||e[6].value)+"")&&y(r,a),(null==(i=e[0].options)?void 0:i.multiple)?c?c.p(e,l):(c=De(e),c.c(),c.m(n,o)):c&&(c.d(1),c=null),5&l&&q(n,"selected",e[2](e[6].value))},d(e){e&&p(n),c&&c.d(),s=!1,u()}}}function je(e){var t;let l,r=R((null==(t=e[0].options)?void 0:t.choices)||[]),i=[];for(let n=0;n<r.length;n+=1)i[n]=Ne(Le(e,r,n));return{c(){l=h("div");for(let e=0;e<i.length;e+=1)i[e].c();b(l,"class","ze-options-grid svelte-2z8vjh")},m(e,t){f(e,l,t);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(l,null)},p(e,[t]){var n;if(7&t){let o;for(r=R((null==(n=e[0].options)?void 0:n.choices)||[]),o=0;o<r.length;o+=1){const n=Le(e,r,o);i[o]?i[o].p(n,t):(i[o]=Ne(n),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:n,o:n,d(e){e&&p(l),m(i,e)}}}function Me(e,t,n){var l;let{question:r}=t;const i=I();let o=(null==(l=r.options)?void 0:l.multiple)?[]:null;function s(e){var t;(null==(t=r.options)?void 0:t.multiple)?(o=o.includes(e)?o.filter(t=>t!==e):[...o,e],i("answer",{answer:o})):(o=e,i("answer",{answer:e}))}return e.$$set=e=>{"question"in e&&n(0,r=e.question)},[r,s,function(e){var t;return(null==(t=r.options)?void 0:t.multiple)?o.includes(e):o===e},e=>s(e.value)]}class Te extends X{constructor(e){super(),H(this,e,Me,je,s,{question:0})}}function Se(e,t,n){const l=e.slice();return l[28]=t[n],l[29]=t,l[30]=n,l}function Ce(e,t,n){const l=e.slice();return l[31]=t[n],l}function Pe(e,t,n){const l=e.slice();return l[34]=t[n],l}function Qe(e){let t;return{c(){t=h("span"),t.textContent="*",b(t,"class","ze-required svelte-10ga8s4")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function Be(e){let t,n,l,r,o;function s(){e[23].call(t,e[28])}function u(){return e[24](e[28])}function a(){return e[25](e[28])}return{c(){t=h("input"),b(t,"id",n="field-"+e[28].name),b(t,"type","text"),b(t,"class","ze-text-input svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),r||(o=[$(t,"input",s),$(t,"input",u),$(t,"blur",a)],r=!0)},p(r,i){e=r,1&i[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&i[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),3&i[0]&&t.value!==e[1][e[28].name]&&x(t,e[1][e[28].name]),5&i[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),r=!1,i(o)}}}function Oe(e){let t,n,l,r,o;function s(){e[20].call(t,e[28])}function u(){return e[21](e[28])}function a(){return e[22](e[28])}return{c(){t=h("input"),b(t,"id",n="field-"+e[28].name),b(t,"type","url"),b(t,"class","ze-text-input svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),r||(o=[$(t,"input",s),$(t,"input",u),$(t,"blur",a)],r=!0)},p(r,i){e=r,1&i[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&i[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),3&i[0]&&t.value!==e[1][e[28].name]&&x(t,e[1][e[28].name]),5&i[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),r=!1,i(o)}}}function Ge(e){let t,n,l,r,o;function s(){e[17].call(t,e[28])}function u(){return e[18](e[28])}function a(){return e[19](e[28])}return{c(){t=h("input"),b(t,"id",n="field-"+e[28].name),b(t,"type","number"),b(t,"class","ze-text-input svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),r||(o=[$(t,"input",s),$(t,"input",u),$(t,"blur",a)],r=!0)},p(r,i){e=r,1&i[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&i[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),3&i[0]&&w(t.value)!==e[1][e[28].name]&&x(t,e[1][e[28].name]),5&i[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),r=!1,i(o)}}}function Ve(e){let t,n,l,r,o;function s(){e[14].call(t,e[28])}function u(){return e[15](e[28])}function a(){return e[16](e[28])}return{c(){t=h("input"),b(t,"id",n="field-"+e[28].name),b(t,"type","tel"),b(t,"class","ze-text-input svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),r||(o=[$(t,"input",s),$(t,"input",u),$(t,"blur",a)],r=!0)},p(r,i){e=r,1&i[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&i[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),3&i[0]&&x(t,e[1][e[28].name]),5&i[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),r=!1,i(o)}}}function We(e){let t,n,l,r,o;function s(){e[11].call(t,e[28])}function u(){return e[12](e[28])}function a(){return e[13](e[28])}return{c(){t=h("input"),b(t,"id",n="field-"+e[28].name),b(t,"type","email"),b(t,"class","ze-text-input svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),r||(o=[$(t,"input",s),$(t,"input",u),$(t,"blur",a)],r=!0)},p(r,i){e=r,1&i[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&i[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),3&i[0]&&t.value!==e[1][e[28].name]&&x(t,e[1][e[28].name]),5&i[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),r=!1,i(o)}}}function Re(e){let t,n,l,r,o,s,u,a=(e[28].text||e[28].label)+"";function c(){e[9].call(n,e[28])}function m(){return e[10](e[28])}return{c(){t=h("label"),n=h("input"),l=g(),r=h("span"),o=v(a),b(n,"type","checkbox"),b(n,"class","ze-checkbox-input svelte-10ga8s4"),b(r,"class","ze-checkbox-text svelte-10ga8s4"),b(t,"class","ze-checkbox-label svelte-10ga8s4")},m(i,a){f(i,t,a),d(t,n),n.checked=e[1][e[28].name],d(t,l),d(t,r),d(r,o),s||(u=[$(n,"change",c),$(n,"change",m)],s=!0)},p(t,l){e=t,3&l[0]&&(n.checked=e[1][e[28].name]),1&l[0]&&a!==(a=(e[28].text||e[28].label)+"")&&y(o,a)},d(e){e&&p(t),s=!1,i(u)}}}function Ze(e){let t,n,l,r,o,s=R(e[28].options||[]),u=[];for(let i=0;i<s.length;i+=1)u[i]=Ye(Pe(e,s,i));function a(){e[7].call(t,e[28])}function c(){return e[8](e[28])}return{c(){t=h("select"),n=h("option"),n.textContent="Bitte wählen...";for(let e=0;e<u.length;e+=1)u[e].c();n.__value="",x(n,n.__value),b(t,"id",l="field-"+e[28].name),b(t,"class","ze-select svelte-10ga8s4"),void 0===e[1][e[28].name]&&M(a),q(t,"error",e[2][e[28].name])},m(l,i){f(l,t,i),d(t,n);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);z(t,e[1][e[28].name],!0),r||(o=[$(t,"change",a),$(t,"change",c)],r=!0)},p(n,r){if(e=n,1&r[0]){let n;for(s=R(e[28].options||[]),n=0;n<s.length;n+=1){const l=Pe(e,s,n);u[n]?u[n].p(l,r):(u[n]=Ye(l),u[n].c(),u[n].m(t,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=s.length}1&r[0]&&l!==(l="field-"+e[28].name)&&b(t,"id",l),3&r[0]&&z(t,e[1][e[28].name]),5&r[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),m(u,e),r=!1,i(o)}}}function Ue(e){let t,n,l,r,o,s;function u(){e[4].call(t,e[28])}function a(){return e[5](e[28])}function c(){return e[6](e[28])}return{c(){t=h("textarea"),b(t,"id",n="field-"+e[28].name),b(t,"class","ze-textarea svelte-10ga8s4"),b(t,"placeholder",l=e[28].placeholder||""),b(t,"rows",r=e[28].rows||3),q(t,"error",e[2][e[28].name])},m(n,l){f(n,t,l),x(t,e[1][e[28].name]),o||(s=[$(t,"input",u),$(t,"input",a),$(t,"blur",c)],o=!0)},p(i,o){e=i,1&o[0]&&n!==(n="field-"+e[28].name)&&b(t,"id",n),1&o[0]&&l!==(l=e[28].placeholder||"")&&b(t,"placeholder",l),1&o[0]&&r!==(r=e[28].rows||3)&&b(t,"rows",r),3&o[0]&&x(t,e[1][e[28].name]),5&o[0]&&q(t,"error",e[2][e[28].name])},d(e){e&&p(t),o=!1,i(s)}}}function Ye(e){let t,n,l,r,i=(e[34].label||e[34].value)+"";return{c(){t=h("option"),n=v(i),l=g(),t.__value=r=e[34].value,x(t,t.__value)},m(e,r){f(e,t,r),d(t,n),d(t,l)},p(e,l){1&l[0]&&i!==(i=(e[34].label||e[34].value)+"")&&y(n,i),1&l[0]&&r!==(r=e[34].value)&&(t.__value=r,x(t,t.__value))},d(e){e&&p(t)}}}function Je(e){let t,n=R(e[2][e[28].name]),l=[];for(let r=0;r<n.length;r+=1)l[r]=He(Ce(e,n,r));return{c(){t=h("div");for(let e=0;e<l.length;e+=1)l[e].c();b(t,"class","ze-field-errors svelte-10ga8s4")},m(e,n){f(e,t,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null)},p(e,r){if(5&r[0]){let i;for(n=R(e[2][e[28].name]),i=0;i<n.length;i+=1){const o=Ce(e,n,i);l[i]?l[i].p(o,r):(l[i]=He(o),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&p(t),m(l,e)}}}function He(e){let t,n,l=e[31]+"";return{c(){t=h("div"),n=v(l),b(t,"class","ze-field-error svelte-10ga8s4")},m(e,l){f(e,t,l),d(t,n)},p(e,t){5&t[0]&&l!==(l=e[31]+"")&&y(n,l)},d(e){e&&p(t)}}}function Xe(e){let t,n,l,r,i,o,s,u,a=e[28].label+"",c=e[28].required&&Qe();function m(e,t){return"textarea"===e[28].type?Ue:"select"===e[28].type?Ze:"checkbox"===e[28].type?Re:"email"===e[28].type?We:"tel"===e[28].type||"phone"===e[28].type?Ve:"number"===e[28].type?Ge:"url"===e[28].type?Oe:Be}let $=m(e),w=$(e),x=e[2][e[28].name]&&Je(e);return{c(){t=h("div"),n=h("label"),l=v(a),r=g(),c&&c.c(),o=g(),w.c(),s=g(),x&&x.c(),u=g(),b(n,"class","ze-field-label svelte-10ga8s4"),b(n,"for",i="field-"+e[28].name),b(t,"class","ze-field-group svelte-10ga8s4")},m(e,i){f(e,t,i),d(t,n),d(n,l),d(n,r),c&&c.m(n,null),d(t,o),w.m(t,null),d(t,s),x&&x.m(t,null),d(t,u)},p(e,r){1&r[0]&&a!==(a=e[28].label+"")&&y(l,a),e[28].required?c||(c=Qe(),c.c(),c.m(n,null)):c&&(c.d(1),c=null),1&r[0]&&i!==(i="field-"+e[28].name)&&b(n,"for",i),$===($=m(e))&&w?w.p(e,r):(w.d(1),w=$(e),w&&(w.c(),w.m(t,s))),e[2][e[28].name]?x?x.p(e,r):(x=Je(e),x.c(),x.m(t,u)):x&&(x.d(1),x=null)},d(e){e&&p(t),c&&c.d(),w.d(),x&&x.d()}}}function Ke(e){var t;let l,r=R((null==(t=e[0].options)?void 0:t.fields)||[]),i=[];for(let n=0;n<r.length;n+=1)i[n]=Xe(Se(e,r,n));return{c(){l=h("div");for(let e=0;e<i.length;e+=1)i[e].c();b(l,"class","ze-multi-input svelte-10ga8s4")},m(e,t){f(e,l,t);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(l,null)},p(e,t){var n;if(15&t[0]){let o;for(r=R((null==(n=e[0].options)?void 0:n.fields)||[]),o=0;o<r.length;o+=1){const n=Se(e,r,o);i[o]?i[o].p(n,t):(i[o]=Xe(n),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:n,o:n,d(e){e&&p(l),m(i,e)}}}function et(e,t,n){let{question:l}=t;const r=I();let i={},o={};function s(e){var t,s;delete o[e],n(2,o={...o});const u=null==(s=null==(t=l.options)?void 0:t.fields)?void 0:s.find(t=>t.name===e);u&&function(e,t){const l=[];!e.required||t&&""!==t.toString().trim()||l.push("Dieses Feld ist erforderlich");if(t&&e.validation&&(e.validation.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&l.push("Bitte geben Sie eine gültige E-Mail-Adresse ein"),e.validation.minLength&&t.length<e.validation.minLength&&l.push(`Mindestens ${e.validation.minLength} Zeichen erforderlich`),e.validation.pattern)){new RegExp(e.validation.pattern).test(t)||l.push(e.validation.patternMessage||"Ungültiges Format")}l.length>0&&(n(2,o[e.name]=l,o),n(2,o={...o}))}(u,i[e]),r("answer",{answer:{...i}})}return e.$$set=e=>{"question"in e&&n(0,l=e.question)},[l,i,o,s,function(e){i[e.name]=this.value,n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name),function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,l)},e=>s(e.name),function(e){i[e.name]=this.checked,n(1,i),n(0,l)},e=>s(e.name),function(e){i[e.name]=this.value,n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name),function(e){i[e.name]=this.value,n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name),function(e){i[e.name]=w(this.value),n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name),function(e){i[e.name]=this.value,n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name),function(e){i[e.name]=this.value,n(1,i),n(0,l)},e=>s(e.name),e=>s(e.name)]}class tt extends X{constructor(e){super(),H(this,e,et,Ke,s,{question:0},null,[-1,-1])}}function nt(e){let t,n,l=e[0].description+"";return{c(){t=h("p"),n=v(l),b(t,"class","ze-question-description svelte-1xyp8lx")},m(e,l){f(e,t,l),d(t,n)},p(e,t){1&t&&l!==(l=e[0].description+"")&&y(n,l)},d(e){e&&p(t)}}}function lt(e){let t,l,r,i=e[0].type+"";return{c(){t=h("div"),l=v("Unsupported question type: "),r=v(i),b(t,"class","ze-error svelte-1xyp8lx")},m(e,n){f(e,t,n),d(t,l),d(t,r)},p(e,t){1&t&&i!==(i=e[0].type+"")&&y(r,i)},i:n,o:n,d(e){e&&p(t)}}}function rt(e){let t,n;return t=new tt({props:{question:e[0]}}),t.$on("answer",e[1]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.question=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function it(e){let t,n;return t=new Te({props:{question:e[0]}}),t.$on("answer",e[1]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.question=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function ot(e){let t,n;return t=new Ae({props:{question:e[0]}}),t.$on("answer",e[1]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.question=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function st(e){let t,n;return t=new xe({props:{question:e[0]}}),t.$on("answer",e[1]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.question=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function ut(e){let t,n;return t=new pe({props:{question:e[0]}}),t.$on("answer",e[1]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.question=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function at(e){let t,n,l,r,i,o,s,u,a,c=e[0].text+"",m=e[0].description&&nt(e);const $=[ut,st,ot,it,rt,lt],w=[];function x(e,t){return"text_input"===e[0].type?0:"image_selection"===e[0].type?1:"icon_selection"===e[0].type?2:"text_selection"===e[0].type?3:"multi_input"===e[0].type?4:5}return s=x(e),u=w[s]=$[s](e),{c(){t=h("div"),n=h("h2"),l=v(c),r=g(),m&&m.c(),i=g(),o=h("div"),u.c(),b(n,"class","ze-question-title svelte-1xyp8lx"),b(o,"class","ze-question-input"),b(t,"class","ze-question ze-fade-in svelte-1xyp8lx")},m(e,u){f(e,t,u),d(t,n),d(n,l),d(t,r),m&&m.m(t,null),d(t,i),d(t,o),w[s].m(o,null),a=!0},p(e,[n]){(!a||1&n)&&c!==(c=e[0].text+"")&&y(l,c),e[0].description?m?m.p(e,n):(m=nt(e),m.c(),m.m(t,i)):m&&(m.d(1),m=null);let r=s;s=x(e),s===r?w[s].p(e,n):(O(),W(w[r],1,1,()=>{w[r]=null}),G(),u=w[s],u?u.p(e,n):(u=w[s]=$[s](e),u.c()),V(u,1),u.m(o,null))},i(e){a||(V(u),a=!0)},o(e){W(u),a=!1},d(e){e&&p(t),m&&m.d(),w[s].d()}}}function ct(e,t,n){let{question:l}=t;const r=I();return e.$$set=e=>{"question"in e&&n(0,l=e.question)},[l,function(e){r("answer",{questionId:l.id,answer:e.detail.answer})},0]}class dt extends X{constructor(e){super(),H(this,e,ct,at,s,{question:0,questionIndex:2})}get questionIndex(){return this.$$.ctx[2]}}function ft(e){let t;return{c(){t=h("div")},m(e,n){f(e,t,n)},p:n,d(e){e&&p(t)}}}function pt(e){let t,n,l,r;return{c(){t=h("button"),n=v("← Zurück"),b(t,"class","ze-btn ze-btn-secondary svelte-co8pal"),t.disabled=e[2],b(t,"type","button")},m(i,o){f(i,t,o),d(t,n),l||(r=$(t,"click",e[5]),l=!0)},p(e,n){4&n&&(t.disabled=e[2])},d(e){e&&p(t),l=!1,r()}}}function mt(e){let t;return{c(){t=v("Weiter →")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function ht(e){let t;return{c(){t=v("Absenden")},m(e,n){f(e,t,n)},d(e){e&&p(t)}}}function vt(e){let t,n;return{c(){t=h("span"),n=v("\n        Wird übermittelt..."),b(t,"class","ze-spinner svelte-co8pal")},m(e,l){f(e,t,l),f(e,n,l)},d(e){e&&(p(t),p(n))}}}function gt(e){let t,l,r,i,o,s,u,a;function c(e,t){return e[0]?pt:ft}let m=c(e),v=m(e);function w(e,t){return e[2]?vt:e[3]?ht:mt}let y=w(e),x=y(e);return{c(){t=h("div"),l=h("div"),v.c(),r=g(),i=h("div"),o=h("button"),x.c(),b(l,"class","ze-nav-left svelte-co8pal"),b(o,"class","ze-btn ze-btn-primary svelte-co8pal"),o.disabled=s=!e[1]||e[2],b(o,"type","button"),b(i,"class","ze-nav-right svelte-co8pal"),b(t,"class","ze-navigation svelte-co8pal")},m(n,s){f(n,t,s),d(t,l),v.m(l,null),d(t,r),d(t,i),d(i,o),x.m(o,null),u||(a=$(o,"click",e[4]),u=!0)},p(e,[t]){m===(m=c(e))&&v?v.p(e,t):(v.d(1),v=m(e),v&&(v.c(),v.m(l,null))),y!==(y=w(e))&&(x.d(1),x=y(e),x&&(x.c(),x.m(o,null))),6&t&&s!==(s=!e[1]||e[2])&&(o.disabled=s)},i:n,o:n,d(e){e&&p(t),v.d(),x.d(),u=!1,a()}}}function $t(e,t,n){let{canGoBack:l=!1}=t,{canGoNext:r=!1}=t,{isLoading:i=!1}=t,{isLastQuestion:o=!1}=t;const s=I();return e.$$set=e=>{"canGoBack"in e&&n(0,l=e.canGoBack),"canGoNext"in e&&n(1,r=e.canGoNext),"isLoading"in e&&n(2,i=e.isLoading),"isLastQuestion"in e&&n(3,o=e.isLastQuestion)},[l,r,i,o,function(){r&&!i&&s("next")},function(){l&&!i&&s("back")}]}class bt extends X{constructor(e){super(),H(this,e,$t,gt,s,{canGoBack:0,canGoNext:1,isLoading:2,isLastQuestion:3})}}function wt(e){let t,l,r,i,o,s,u,a=e[0].thankYouRedirectUrl&&function(e){let t,l,r,i=(e[0].thankYouRedirectText||"Weiter")+"";return{c(){t=h("div"),l=h("a"),r=v(i),b(l,"href",e[0].thankYouRedirectUrl),b(l,"class","ze-btn ze-btn-primary svelte-38bubl"),b(l,"target",e[0].thankYouRedirectTarget||"_self"),b(t,"class","ze-thank-you-actions svelte-38bubl")},m(e,n){f(e,t,n),d(t,l),d(l,r)},p:n,d(e){e&&p(t)}}}(e);return{c(){t=h("div"),l=h("div"),l.textContent="🎉",r=g(),i=h("h2"),i.textContent=`${e[0].thankYouTitle||"Vielen Dank!"}`,o=g(),s=h("p"),s.textContent=`${e[0].thankYouMessage||"Ihre Antworten wurden erfolgreich übermittelt. Wir werden uns bald bei Ihnen melden."}`,u=g(),a&&a.c(),b(l,"class","ze-thank-you-icon svelte-38bubl"),b(i,"class","ze-thank-you-title svelte-38bubl"),b(s,"class","ze-thank-you-message svelte-38bubl"),b(t,"class","ze-thank-you ze-fade-in svelte-38bubl")},m(e,n){f(e,t,n),d(t,l),d(t,r),d(t,i),d(t,o),d(t,s),d(t,u),a&&a.m(t,null)},p(e,[t]){e[0].thankYouRedirectUrl&&a.p(e,t)},i:n,o:n,d(e){e&&p(t),a&&a.d()}}}function yt(e,t,n){let{funnelData:l}=t;const r=(null==l?void 0:l.settings)||{};return e.$$set=e=>{"funnelData"in e&&n(1,l=e.funnelData)},[r,l]}class xt extends X{constructor(e){super(),H(this,e,yt,wt,s,{funnelData:1})}}function kt(e){let t,n,l,r,i,o=e[0].settings.progressBar&&qt(e),s=e[4]&&_t(e),u=e[6]&&Et(e);return r=new bt({props:{canGoBack:e[7],canGoNext:e[8],isLoading:e[3],isLastQuestion:e[1]>=e[2]-1}}),r.$on("next",e[10]),r.$on("back",e[11]),{c(){o&&o.c(),t=g(),s&&s.c(),n=g(),u&&u.c(),l=g(),Z(r.$$.fragment)},m(e,a){o&&o.m(e,a),f(e,t,a),s&&s.m(e,a),f(e,n,a),u&&u.m(e,a),f(e,l,a),U(r,e,a),i=!0},p(e,i){e[0].settings.progressBar?o?(o.p(e,i),1&i&&V(o,1)):(o=qt(e),o.c(),V(o,1),o.m(t.parentNode,t)):o&&(O(),W(o,1,1,()=>{o=null}),G()),e[4]?s?s.p(e,i):(s=_t(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),e[6]?u?(u.p(e,i),64&i&&V(u,1)):(u=Et(e),u.c(),V(u,1),u.m(l.parentNode,l)):u&&(O(),W(u,1,1,()=>{u=null}),G());const a={};128&i&&(a.canGoBack=e[7]),256&i&&(a.canGoNext=e[8]),8&i&&(a.isLoading=e[3]),6&i&&(a.isLastQuestion=e[1]>=e[2]-1),r.$set(a)},i(e){i||(V(o),V(u),V(r.$$.fragment,e),i=!0)},o(e){W(o),W(u),W(r.$$.fragment,e),i=!1},d(e){e&&(p(t),p(n),p(l)),o&&o.d(e),s&&s.d(e),u&&u.d(e),Y(r,e)}}}function zt(e){let t,n;return t=new xt({props:{funnelData:e[0]}}),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.funnelData=e[0]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function qt(e){let t,n;return t=new ie({props:{progress:e[9],current:e[1]+1,total:e[2]}}),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};512&n&&(l.progress=e[9]),2&n&&(l.current=e[1]+1),4&n&&(l.total=e[2]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function _t(e){let t,n,l,r,i,o,s;return{c(){t=h("div"),n=h("p"),l=v(e[4]),r=g(),i=h("button"),i.textContent="Dismiss",b(i,"type","button"),b(i,"class","svelte-10gkki8"),b(t,"class","ze-funnel-error svelte-10gkki8"),b(t,"role","alert")},m(u,a){f(u,t,a),d(t,n),d(n,l),d(t,r),d(t,i),o||(s=$(i,"click",e[14]),o=!0)},p(e,t){16&t&&y(l,e[4])},d(e){e&&p(t),o=!1,s()}}}function Et(e){let t,n;return t=new dt({props:{question:e[6],questionIndex:e[1]}}),t.$on("answer",e[12]),{c(){Z(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};64&n&&(l.question=e[6]),2&n&&(l.questionIndex=e[1]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function It(e){let t,n,l,r;const i=[zt,kt],o=[];function s(e,t){return e[5]?0:1}return n=s(e),l=o[n]=i[n](e),{c(){t=h("div"),l.c(),b(t,"class","ze-funnel svelte-10gkki8"),q(t,"loading",e[3])},m(e,l){f(e,t,l),o[n].m(t,null),r=!0},p(e,[u]){let a=n;n=s(e),n===a?o[n].p(e,u):(O(),W(o[a],1,1,()=>{o[a]=null}),G(),l=o[n],l?l.p(e,u):(l=o[n]=i[n](e),l.c()),V(l,1),l.m(t,null)),(!r||8&u)&&q(t,"loading",e[3])},i(e){r||(V(l),r=!0)},o(e){W(l),r=!1},d(e){e&&p(t),o[n].d()}}}function At(e,t){switch(e.operator){case"equals":return t===e.value;case"not_equals":return t!==e.value;case"contains":return!!Array.isArray(t)&&t.includes(e.value);case"greater_than":return Number(t)>Number(e.value);case"less_than":return Number(t)<Number(e.value);default:return!1}}function Lt(e,t,n){let l,r,i,o,s,{funnelData:u}=t;const a=I();let c=0,d=!1,f=null,p=!1;var m;function h(e){return u.questions.findIndex(t=>t.id===e)}m=()=>{ne.trackEvent("funnel_start",{funnelId:u.id,questionId:null==l?void 0:l.id}),l&&ne.trackEvent("question_view",{questionId:l.id,questionIndex:c})},E().$$.on_mount.push(m);return e.$$set=e=>{"funnelData"in e&&n(0,u=e.funnelData)},e.$$.update=()=>{var t,a,d;1&e.$$.dirty&&u&&(te.initialize(u),ne.initialize(u.tracking)),3&e.$$.dirty&&n(6,l=null==(t=null==u?void 0:u.questions)?void 0:t[c]),1&e.$$.dirty&&n(2,r=(null==(a=null==u?void 0:u.questions)?void 0:a.length)||0),6&e.$$.dirty&&n(9,i=r>0?(c+1)/r*100:0),3&e.$$.dirty&&n(7,o=c>0&&(null==(d=null==u?void 0:u.settings)?void 0:d.allowBack)),2&e.$$.dirty&&n(8,s=te.isCurrentQuestionAnswered(c))},[u,c,r,d,f,p,l,o,s,i,async function(){if(!s)return;const e=te.getAnswer(l.id);if(ne.trackEvent("question_answer",{questionId:l.id,questionIndex:c,answer:e}),c>=r-1)return void(await async function(){n(3,d=!0),n(4,f=null);try{const e={funnelId:u.id,answers:te.getAllAnswers(),sessionId:u.tracking.sessionId,completedAt:(new Date).toISOString()},t=await fetch(u.form.submitUrl,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":u.form.nonce},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP ${t.status}`);const l=await t.json();ne.trackEvent("funnel_complete",{funnelId:u.id,totalQuestions:r,completionTime:ne.getCompletionTime()}),n(5,p=!0),a("complete",{submissionData:e,result:l})}catch(e){console.error("Funnel submission failed:",e),n(4,f="Failed to submit your responses. Please try again."),ne.trackEvent("submission_error",{funnelId:u.id,error:e.message})}finally{n(3,d=!1)}}());const t=function(){const e=te.getAnswer(l.id);if(l.conditional&&l.conditional.length>0)for(const t of l.conditional)if(At(t,e)){if("jump_to"===t.action)return h(t.target);if("skip_next"===t.action)return c+2}return c+1}();if(null!==t){n(1,c=t);const e=u.questions[c];e&&ne.trackEvent("question_view",{questionId:e.id,questionIndex:c})}},function(){o&&(n(1,c=Math.max(0,c-1)),ne.trackEvent("navigation_back",{fromQuestionIndex:c+1,toQuestionIndex:c}))},function(e){te.setAnswer(l.id,e.detail.answer)},null,()=>n(4,f=null)]}class Dt extends X{constructor(e){super(),H(this,e,Lt,It,s,{funnelData:0,containerId:13})}get containerId(){return this.$$.ctx[13]}}class Ft{constructor(){this.apps=new Map,this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.mountFunnels()):this.mountFunnels()}mountFunnels(){document.querySelectorAll(".ze-funnel-container").forEach(e=>{this.mountFunnel(e)})}mountFunnel(e){const t=e.dataset.funnelId,n=e.querySelector('script[type="application/json"]');if(!n)return void console.error("Ze Funnel: No data found for funnel",t);let l;try{l=JSON.parse(n.textContent)}catch(i){return void console.error("Ze Funnel: Invalid JSON data",i)}const r=e.querySelector(".ze-funnel-app");if(r)try{const n=new Dt({target:r,props:{funnelData:l,containerId:e.id}});this.apps.set(t,n),console.log(`Ze Funnel: Mounted funnel ${t}`)}catch(i){console.error("Ze Funnel: Failed to mount app",i),this.showError(r,"Failed to load funnel. Please refresh the page.")}else console.error("Ze Funnel: App container not found")}showError(e,t){e.innerHTML=`\n      <div class="ze-funnel-error">\n        <p>${t}</p>\n      </div>\n    `}destroy(){this.apps.forEach(e=>{e&&"function"==typeof e.$destroy&&e.$destroy()}),this.apps.clear()}}return window.zeFunnelInit=new Ft,Ft}();
//# sourceMappingURL=ze-funnel.js.map
